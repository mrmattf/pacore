{
  "info": {
    "name": "PA Core - SSE Streaming Test",
    "description": "Test Server-Sent Events streaming with Ollama",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Register User",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"streaming-test@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"name\": \"Streaming Test User\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/v1/auth/register",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["v1", "auth", "register"]
        }
      },
      "response": [],
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "const response = pm.response.json();",
              "pm.collectionVariables.set(\"auth_token\", response.token);"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "2. Configure Ollama",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{auth_token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"endpoint\": \"http://host.docker.internal:11434\",\n  \"model\": \"llama3.2\"\n}"
        },
        "url": {
          "raw": "http://localhost:3000/v1/providers/ollama/configure",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["v1", "providers", "ollama", "configure"]
        }
      },
      "response": []
    },
    {
      "name": "3. Test Non-Streaming (Regular)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{auth_token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"Say hello in one sentence\"\n    }\n  ],\n  \"options\": {\n    \"providerId\": \"ollama\",\n    \"contextSearch\": false\n  }\n}"
        },
        "url": {
          "raw": "http://localhost:3000/v1/complete",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["v1", "complete"]
        }
      },
      "response": []
    },
    {
      "name": "4. Test SSE Streaming ‚≠ê",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{auth_token}}"
          },
          {
            "key": "Accept",
            "value": "text/event-stream"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"Tell me a short joke about programming\"\n    }\n  ],\n  \"options\": {\n    \"providerId\": \"ollama\",\n    \"stream\": true,\n    \"contextSearch\": false\n  }\n}"
        },
        "url": {
          "raw": "http://localhost:3000/v1/complete",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["v1", "complete"]
        }
      },
      "response": []
    },
    {
      "name": "5. Test Streaming with Context Search",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{auth_token}}"
          },
          {
            "key": "Accept",
            "value": "text/event-stream"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"What did we discuss earlier?\"\n    }\n  ],\n  \"options\": {\n    \"providerId\": \"ollama\",\n    \"stream\": true,\n    \"contextSearch\": {\n      \"enabled\": true,\n      \"limit\": 3,\n      \"minRelevance\": 0.7\n    }\n  }\n}"
        },
        "url": {
          "raw": "http://localhost:3000/v1/complete",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["v1", "complete"]
        }
      },
      "response": []
    },
    {
      "name": "6. List Configured Providers",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{auth_token}}"
          }
        ],
        "url": {
          "raw": "http://localhost:3000/v1/providers",
          "protocol": "http",
          "host": ["localhost"],
          "port": "3000",
          "path": ["v1", "providers"]
        }
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    }
  ]
}
